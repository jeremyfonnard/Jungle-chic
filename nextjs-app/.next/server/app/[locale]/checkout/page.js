(()=>{var e={};e.id=13,e.ids=[13],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},27790:e=>{"use strict";e.exports=require("assert")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},32694:e=>{"use strict";e.exports=require("http2")},35240:e=>{"use strict";e.exports=require("https")},55315:e=>{"use strict";e.exports=require("path")},76162:e=>{"use strict";e.exports=require("stream")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},61528:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(25029),s(59958),s(11506),s(35866);var t=s(23191),a=s(88716),i=s(37922),l=s.n(i),d=s(95231),n={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>d[e]);s.d(r,n);let o=["",{children:["[locale]",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,25029)),"/app/nextjs-app/app/[locale]/checkout/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,59958)),"/app/nextjs-app/app/[locale]/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"/app/nextjs-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["/app/nextjs-app/app/[locale]/checkout/page.tsx"],u="/[locale]/checkout/page",p={require:s,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/[locale]/checkout/page",pathname:"/[locale]/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},67123:(e,r,s)=>{Promise.resolve().then(s.bind(s,7680))},7680:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>f});var t=s(10326),a=s(17577),i=s(35047),l=s(6162),d=s(20799),n=s(54744),o=s(90772),c=s(54432),u=s(92397),p=s(94464),m=s(85999),x=s(16361),h=s(90725),g=s(46226);function f(){let e=(0,l.T)("checkout"),r=(0,i.useParams)().locale,{user:s,token:f}=(0,d.useAuthStore)(),{cart:j}=(0,n.x)(),[y,b]=(0,a.useState)(!1),[v,N]=(0,a.useState)({}),[_,w]=(0,a.useState)(1),[q,k]=(0,a.useState)({first_name:s?.first_name||"",last_name:s?.last_name||"",address:"",city:"",postal_code:"",country:"fr"===r?"France":"United States",phone:""}),P=()=>{let e=j?.items?.reduce((e,r)=>{let s=v[r.product_id];return e+(s?.price||0)*r.quantity},0)||0;return e+(e>=50?0:5)},C=async()=>{b(!0);try{let e=(await p.Z.post("/api/orders",q,{headers:{Authorization:`Bearer ${f}`}})).data,r=window.location.origin,s=await p.Z.post("/api/payments/checkout",{order_id:e.id,origin_url:r},{headers:{Authorization:`Bearer ${f}`}});window.location.href=s.data.url}catch(e){console.error("Error creating order:",e),m.A.error("fr"===r?"Erreur lors de la cr\xe9ation de la commande":"Error creating order")}finally{b(!1)}};return j?.items?.length?(0,t.jsxs)(t.Fragment,{children:[t.jsx(x.w,{locale:r}),(0,t.jsxs)("div",{className:"min-h-screen",children:[t.jsx("div",{className:"texture-overlay"}),(0,t.jsxs)("div",{className:"max-w-[1200px] mx-auto px-6 md:px-12 py-12",children:[t.jsx("h1",{className:"text-4xl md:text-5xl font-serif tracking-tight text-primary mb-8",children:e("title")}),(0,t.jsxs)("div",{className:"mb-8 flex gap-4",children:[t.jsx("div",{className:`flex-1 h-2 rounded-full ${_>=1?"bg-primary":"bg-gray-200"}`}),t.jsx("div",{className:`flex-1 h-2 rounded-full ${_>=2?"bg-primary":"bg-gray-200"}`})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2",children:[1===_&&(0,t.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm p-8",children:[t.jsx("h2",{className:"text-2xl font-serif text-primary mb-6",children:e("shipping_address")}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),w(2)},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"first_name",children:"fr"===r?"Pr\xe9nom":"First name"}),t.jsx(c.I,{id:"first_name",value:q.first_name,onChange:e=>k({...q,first_name:e.target.value}),required:!0,className:"rounded-xl border-primary/20 bg-white/50"})]}),(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"last_name",children:"fr"===r?"Nom":"Last name"}),t.jsx(c.I,{id:"last_name",value:q.last_name,onChange:e=>k({...q,last_name:e.target.value}),required:!0,className:"rounded-xl border-primary/20 bg-white/50"})]})]}),(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"address",children:e("address")}),t.jsx(c.I,{id:"address",value:q.address,onChange:e=>k({...q,address:e.target.value}),required:!0,className:"rounded-xl border-primary/20 bg-white/50"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"city",children:e("city")}),t.jsx(c.I,{id:"city",value:q.city,onChange:e=>k({...q,city:e.target.value}),required:!0,className:"rounded-xl border-primary/20 bg-white/50"})]}),(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"postal_code",children:e("postal_code")}),t.jsx(c.I,{id:"postal_code",value:q.postal_code,onChange:e=>k({...q,postal_code:e.target.value}),required:!0,className:"rounded-xl border-primary/20 bg-white/50"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"country",children:e("country")}),t.jsx(c.I,{id:"country",value:q.country,onChange:e=>k({...q,country:e.target.value}),required:!0,className:"rounded-xl border-primary/20 bg-white/50"})]}),(0,t.jsxs)("div",{children:[t.jsx(u._,{htmlFor:"phone",children:e("phone")}),t.jsx(c.I,{id:"phone",value:q.phone,onChange:e=>k({...q,phone:e.target.value}),required:!0,className:"rounded-xl border-primary/20 bg-white/50"})]})]}),t.jsx(o.z,{type:"submit",className:"w-full bg-primary text-primary-foreground rounded-full px-8 py-3 hover:bg-primary/90 transition-all duration-300 shadow-lg hover:shadow-xl font-medium tracking-wide",children:"fr"===r?"Continuer vers le paiement":"Continue to payment"})]})]}),2===_&&(0,t.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm p-8",children:[t.jsx("h2",{className:"text-2xl font-serif text-primary mb-6",children:e("payment")}),(0,t.jsxs)("div",{className:"mb-6",children:[t.jsx("h3",{className:"font-semibold text-primary mb-3",children:e("shipping_address")}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-sm",children:[(0,t.jsxs)("p",{children:[q.first_name," ",q.last_name]}),t.jsx("p",{children:q.address}),(0,t.jsxs)("p",{children:[q.postal_code," ",q.city]}),t.jsx("p",{children:q.country}),t.jsx("p",{children:q.phone})]}),t.jsx("button",{onClick:()=>w(1),className:"text-primary hover:text-secondary transition-colors text-sm mt-2 underline",children:"fr"===r?"Modifier l'adresse":"Edit address"})]}),t.jsx("div",{className:"mb-6",children:t.jsx("p",{className:"text-foreground/70 mb-4",children:"fr"===r?"Vous allez \xeatre redirig\xe9 vers Stripe pour effectuer le paiement de mani\xe8re s\xe9curis\xe9e.":"You will be redirected to Stripe to complete your payment securely."})}),t.jsx(o.z,{onClick:C,disabled:y,className:"w-full bg-primary text-primary-foreground rounded-full px-8 py-3 hover:bg-primary/90 transition-all duration-300 shadow-lg hover:shadow-xl font-medium tracking-wide",children:y?"fr"===r?"Cr\xe9ation de la commande...":"Creating order...":e("proceed_to_payment")})]})]}),t.jsx("div",{className:"lg:col-span-1",children:(0,t.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm p-6 sticky top-24",children:[t.jsx("h2",{className:"text-2xl font-serif text-primary mb-6",children:"fr"===r?"R\xe9sum\xe9":"Summary"}),t.jsx("div",{className:"space-y-4 mb-6",children:j.items.map(e=>{let r=v[e.product_id];return r?(0,t.jsxs)("div",{className:"flex gap-3",children:[t.jsx("div",{className:"relative w-16 h-20 flex-shrink-0",children:t.jsx(g.default,{src:r.images[0],alt:r.name,fill:!0,className:"object-cover rounded-lg"})}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-primary",children:r.name}),(0,t.jsxs)("p",{className:"text-xs text-foreground/70",children:[e.size," | ",e.color," | x",e.quantity]}),(0,t.jsxs)("p",{className:"text-sm text-secondary font-semibold",children:[(r.price*e.quantity).toFixed(2),"€"]})]})]},`${e.product_id}-${e.size}-${e.color}`):null})}),(0,t.jsxs)("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-foreground/70",children:"fr"===r?"Sous-total":"Subtotal"}),(0,t.jsxs)("span",{className:"font-medium",children:[(P()-(P()>=55?0:5)).toFixed(2),"€"]})]}),(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-foreground/70",children:"fr"===r?"Livraison":"Shipping"}),t.jsx("span",{className:"font-medium",children:P()-5>=50?"fr"===r?"Gratuit":"Free":"5.00€"})]}),(0,t.jsxs)("div",{className:"flex justify-between text-lg font-semibold pt-2 border-t border-gray-200",children:[t.jsx("span",{className:"text-primary",children:"Total"}),(0,t.jsxs)("span",{className:"text-secondary",children:[P().toFixed(2),"€"]})]})]})]})})]})]})]}),t.jsx(h.$,{locale:r})]}):null}},54432:(e,r,s)=>{"use strict";s.d(r,{I:()=>l});var t=s(10326),a=s(17577),i=s(77863);let l=a.forwardRef(({className:e,type:r,...s},a)=>t.jsx("input",{type:r,className:(0,i.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));l.displayName="Input"},92397:(e,r,s)=>{"use strict";s.d(r,{_:()=>u});var t=s(10326),a=s(17577);s(60962);var i=s(34214),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let s=(0,i.Z8)(`Primitive.${r}`),l=a.forwardRef((e,a)=>{let{asChild:i,...l}=e,d=i?s:r;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(d,{...l,ref:a})});return l.displayName=`Primitive.${r}`,{...e,[r]:l}},{}),d=a.forwardRef((e,r)=>(0,t.jsx)(l.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));d.displayName="Label";var n=s(79360),o=s(77863);let c=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=a.forwardRef(({className:e,...r},s)=>t.jsx(d,{ref:s,className:(0,o.cn)(c(),e),...r}));u.displayName=d.displayName},25029:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>t});let t=(0,s(68570).createProxy)(String.raw`/app/nextjs-app/app/[locale]/checkout/page.tsx#default`)}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[276,959,523,614,226,702],()=>s(61528));module.exports=t})();